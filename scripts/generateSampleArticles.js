require('dotenv').config();
const mongoose = require('mongoose');
const Article = require('../models/Article');
const User = require('../models/User');

// 同人PCゲーム攻略記事のサンプルデータ
const sampleArticles = [
  {
    title: '【完全攻略】ダンジョンクエスト - 全ボス攻略とレアアイテム入手法',
    gameTitle: 'ダンジョンクエスト',
    genre: 'RPG',
    releaseDate: new Date('2025-01-15'),
    developer: 'インディーゲームスタジオ',
    platform: 'PC',
    description: '人気同人RPG「ダンジョンクエスト」の完全攻略ガイド。全ボスの倒し方、隠しダンジョンの場所、レアアイテムの入手方法を詳しく解説します。',
    content: `## 🎮 ゲーム概要

「ダンジョンクエスト」は、クラシックなRPGスタイルを現代風にアレンジした同人ゲームです。
戦略的なバトルシステムと豊富なアイテム収集が特徴で、やり込み要素満載の作品となっています。

## ⚔️ 序盤の進め方

### スタート地点から村まで（推奨レベル：1-3）

1. **最初の装備を整える**
   - 村の武器屋で「鉄の剣」を購入（500ゴールド）
   - 防具屋で「革の鎧」を入手（300ゴールド）
   - 薬草を5個以上ストック

2. **初期クエストをクリア**
   - 村長の依頼「森の魔物退治」を受ける
   - スライム×10体を倒す
   - 報酬：1000ゴールド + 経験値500

## 🏰 第1ダンジョン「古の遺跡」攻略

### 推奨レベル：5-7
### 必須アイテム：松明×3、解毒薬×5

#### B1F マップ攻略

- **宝箱の場所**
  - 北東の部屋：HP回復薬×3
  - 西側の隠し部屋：鋼の剣（攻撃力+15）
  - 中央広場：500ゴールド

- **注意すべき敵**
  - ポイズンスパイダー：毒攻撃に注意（解毒薬必須）
  - ゴブリンソルジャー：防御が高い（魔法攻撃推奨）

#### B2F ボス戦「ガーディアンゴーレム」

**基本情報**
- HP: 2500
- 弱点: 雷属性魔法
- 耐性: 物理攻撃（ダメージ50%カット）

**攻略手順**

1. **準備フェーズ**
   - バフアイテム「力の秘薬」を使用
   - MP全快の状態で挑む
   - HP回復薬を5個以上所持

2. **戦闘パターン**
   - 第1フェーズ（HP100%-50%）
     - 「岩石落とし」：単体大ダメージ（約200）
     - 「地震」：全体中ダメージ（約100）
     - 対策：防御を固めて雷魔法で攻撃

   - 第2フェーズ（HP50%-0%）
     - 「暴走モード」：攻撃力1.5倍
     - 「連続攻撃」：2回連続攻撃
     - 対策：HPを常に200以上キープ

3. **推奨戦術**
   - ターン1-2：雷魔法「サンダーボルト」で攻撃
   - ターン3：HPが半分以下なら回復
   - ターン4-6：「サンダーストーム」でラッシュ
   - 繰り返しでクリア可能

**ドロップアイテム**
- 確定：古代の鍵
- レア（20%）：ゴーレムの心臓（防御力+20の素材）
- 超レア（5%）：伝説の盾

## 💎 レアアイテム入手法

### 1. 「伝説の剣」入手方法

**場所**: 第3ダンジョン「氷の洞窟」B5F隠し部屋

**入手条件**:
- メインストーリー50%以上進行
- 「氷の鍵」を所持（B3Fボスドロップ）
- 仲間キャラ「リリア」を加入済み

**手順**:
1. B5F中央広場の北側の壁を調べる
2. リリアのスキル「魔法探知」を使用
3. 隠し扉が出現するので進入
4. 宝箱から入手（戦闘なし）

**性能**:
- 攻撃力：+80
- 特殊効果：クリティカル率+15%
- 追加効果：光属性ダメージ（敵全体に50固定ダメージ）

### 2. 「エリクサー」無限入手バグ（パッチ1.2以前）

**注意**: 最新版では修正済み

**方法**:
1. 商店街の薬屋に入る
2. エリクサーを選択（購入しない）
3. キャンセル後、すぐにメニューを開く
4. アイテム欄を確認すると1個増えている

### 3. 隠しボス「ドラゴンロード」からのレアドロップ

**出現条件**:
- 全ダンジョンクリア
- プレイ時間30時間以上
- パーティー平均レベル50以上

**ドロップアイテム**:
- 竜の牙（100%）
- ドラゴンスケール（50%）
- 竜王の王冠（10%）
- 最強武器「竜神剣」（1%）

## 🗺️ 隠しダンジョン「奈落の底」

### 出現条件
1. メインストーリークリア
2. 全てのサブクエストクリア（20個）
3. 図鑑完成度80%以上

### 攻略ポイント
- 推奨レベル：70以上
- 全10階層（各階層にボスあり）
- セーブポイントは5階層ごと
- 途中離脱不可（クリアor全滅のみ）

### 報酬
- 最強防具一式
- スキルポイント+50
- 称号「深淵を制する者」

## 💰 効率的な金策方法

### 序盤（レベル1-20）
- **スライム狩り**: 時給約5,000ゴールド
- 場所：初期の森
- ドロップ：スライムゼリー（50G）

### 中盤（レベル21-40）
- **宝箱マラソン**: 時給約15,000ゴールド
- 場所：古の遺跡B2F
- マップ切り替えで宝箱復活

### 終盤（レベル41-70）
- **レアアイテム売却**: 時給約50,000ゴールド
- 場所：氷の洞窟B4F
- 「魔法の結晶」を集めて売却（1個500G）

### 最終盤（レベル71+）
- **隠しボス周回**: 時給約200,000ゴールド
- ドラゴンロードの素材を売却
- 1回の討伐で約20,000G

## 🎯 トロフィー・実績コンプリート

### 必須トロフィー（ストーリー進行で自動入手）
- ✅ 冒険の始まり：ゲーム開始
- ✅ 最初の試練：第1ダンジョンクリア
- ✅ 仲間との絆：全仲間キャラ加入
- ✅ 世界を救う者：メインストーリークリア

### 難易度高めトロフィー
- 🏆 **完璧主義者**: 全クエストクリア
  - サブクエスト20個全てをクリア
  - 見逃しやすいクエスト：「老婆の思い出」（村の北東の家）

- 🏆 **モンスターマスター**: 図鑑100%
  - レアモンスター「メタルスライム」に注意
  - 出現率0.5%（初期の森でランダム）

- 🏆 **最強への道**: 全キャラレベル99
  - 経験値稼ぎ最適解：隠しダンジョンB8F
  - 1周約50,000EXP

## 📝 よくある質問（FAQ）

### Q1: ゲームが進まなくなった時は？
A: 村の掲示板を確認してください。次に進むべきクエストが表示されています。

### Q2: レベル上げの最適な場所は？
A: 各章ごとに異なりますが、基本的に「最新のダンジョンの1つ前の階層」が効率的です。

### Q3: セーブデータが消えた場合は？
A: バックアップフォルダ（savedata_backup）を確認してください。自動バックアップが1時間ごとに作成されています。

### Q4: 裏ボスが倒せない
A: レベル70以上、全員の武器防具を最強装備にすることを推奨します。また、属性耐性を上げるアクセサリーが重要です。

## 🔗 関連リンク

- 公式サイト：https://example.com/dungeon-quest
- 攻略Wiki：https://example.com/dq-wiki
- 公式Twitter：@DungeonQuest_Official

## 📅 アップデート情報

**Ver 1.3（2025年1月20日）**
- 新ダンジョン「天空の塔」追加
- レベルキャップ解放（99→120）
- バグ修正多数

**Ver 1.2（2024年12月15日）**
- アイテム増殖バグ修正
- バランス調整

---

*この攻略記事は2025年12月31日時点の情報です。最新のアップデートで変更される可能性があります。*`,
    rating: 5,
    imageUrl: 'https://via.placeholder.com/800x400?text=Dungeon+Quest',
    affiliateLink: 'https://example.com/affiliate/dungeon-quest',
    tags: ['RPG', '攻略', 'ボス戦', 'レアアイテム', '同人ゲーム', 'ダンジョン探索'],
    status: 'published',
    views: 0
  },
  {
    title: '【初心者向け】パズルアドベンチャー - 全ステージ攻略チャート',
    gameTitle: 'パズルアドベンチャー',
    genre: 'パズル',
    releaseDate: new Date('2024-11-20'),
    developer: 'パズルマスター工房',
    platform: 'PC',
    description: '頭脳派に人気の同人パズルゲーム「パズルアドベンチャー」の初心者向け完全攻略。全100ステージの解法とSランク獲得のコツを伝授します。',
    content: `## 🧩 ゲーム紹介

「パズルアドベンチャー」は、シンプルながら奥深いパズルメカニクスが魅力の同人ゲームです。
全100ステージ、やり込み要素も充実しており、パズル好きにはたまらない作品となっています。

## 📖 基本ルール

### ゲームの目的
- 制限手数内にゴールに到達する
- 途中でコインを全て回収する（Sランク条件）
- 障害物を避けながら最短ルートを見つける

### 操作方法
- **移動**: 矢印キー（上下左右）
- **アンドゥ**: Z キー
- **リセット**: R キー
- **ヒント**: H キー（使用回数制限あり）

### ランク評価
- **Sランク**: 全コイン回収 + 最短手数
- **Aランク**: 全コイン回収
- **Bランク**: クリア（コイン未回収）
- **Cランク**: クリア（制限手数ギリギリ）

## 🎯 ステージ1-10（チュートリアル）

### Stage 1: 「最初の一歩」
**目標手数**: 5手
**コイン数**: 1個

**攻略**:
1. 右に3歩
2. 上に1歩
3. 右に1歩（ゴール）

**Sランク条件**: 5手でクリア

### Stage 5: 「分岐路」
**目標手数**: 12手
**コイン数**: 3個

**攻略**:
1. 上ルートでコイン2個回収（8手）
2. 下に戻って右ルート（3手）
3. 最後のコインを取ってゴール（1手）

**ポイント**: 上ルートを先に攻略するのが効率的

## 🌟 ステージ11-30（初級）

### Stage 15: 「氷の床」
**新要素**: 氷の床（止まれない）

**攻略のコツ**:
- 氷の床に入る前に進行方向を確認
- 壁を利用して止まる
- 一度滑り出したらアンドゥで戻る

**推奨ルート**:
1. 右の氷床エリアに突入
2. 壁に当たって止まる位置を計算
3. コインを回収しながら下部へ
4. 左側の通常床に戻ってゴール

### Stage 20: 「スイッチパズル」
**新要素**: 床スイッチ（扉の開閉）

**攻略手順**:
1. 赤スイッチを踏む→赤扉が開く
2. 青エリアでコイン回収
3. 青スイッチを踏む→青扉が開く、赤扉が閉じる
4. ゴールへの道が開く

**重要**: スイッチの順番を間違えると詰む可能性あり

## 🔥 ステージ31-60（中級）

### Stage 35: 「タイムアタック」
**新要素**: 制限時間（60秒）

**高速クリアのコツ**:
- 事前にルートを頭の中でシミュレーション
- アンドゥを使わないプレイを目指す
- コイン回収は効率的なルートで

**Sランク攻略**:
- 理論上最短：28手
- 推奨ルート：左回りでコイン回収→中央突破

### Stage 45: 「ワープゾーン」
**新要素**: ワープパネル（青⇔青、赤⇔赤）

**パズル解法**:
1. 青ワープで左上エリアへ
2. コイン2個回収
3. 赤ワープで右下エリアへ
4. 残りコイン回収
5. 青ワープで中央に戻る
6. ゴール

**注意点**: ワープ先に障害物がないか確認

### Stage 50: 「ボスステージ」
**特殊ルール**: 全ギミック複合

**攻略のポイント**:
- 氷床 + スイッチ + ワープの三重パズル
- 推奨手数：45手以内
- ヒント機能を1回使用可能

**完全攻略ルート**:
1. フェーズ1（手数0-15）：左エリア制覇
   - スイッチAを踏む
   - 氷床を滑ってコイン3個

2. フェーズ2（手数16-30）：中央エリア
   - ワープで右上へ
   - スイッチBを踏む
   - コイン4個回収

3. フェーズ3（手数31-45）：ゴールへ
   - 中央に戻る
   - 開いた扉からゴールエリアへ
   - 最後のコイン回収

## 💪 ステージ61-90（上級）

### Stage 70: 「逆転の発想」
**難易度**: ★★★★☆

**ポイント**:
- 普通に進むとクリア不可能
- 答え：ゴール手前でわざと遠回り
- コイン配置に騙されない

**解法**:
1. ゴールを無視して下へ
2. 隠しルートでコイン回収
3. 大きく迂回してゴール到達

### Stage 85: 「連鎖パズル」
**新要素**: 連鎖ブロック（1つ動かすと他も動く）

**攻略の鍵**:
- 連鎖を計算してから動く
- 1手で複数のブロックが移動
- 試行錯誤が必要（アンドゥ多用推奨）

**基本パターン**:
- Aブロックを右に→B,Cも右に
- 順番：A→B→C→ゴール

## 🏆 ステージ91-100（超上級）

### Stage 95: 「時空の迷宮」
**難易度**: ★★★★★

**特徴**:
- 今までの全要素が登場
- 制限手数：80手
- コイン：10個

**完全攻略は別記事で詳細解説予定**

基本方針：
1. エリアを4つに分割して考える
2. 各エリアのコイン回収順を最適化
3. ワープとスイッチのタイミングが重要

### Stage 100: 「真の試練」（最終ステージ）
**難易度**: ★★★★★+

**クリア条件**:
- Stage 1-99を全てSランククリア
- 制限時間：なし（じっくり考えられる）
- コイン：15個

**報酬**:
- エンディング解放
- 隠しステージ101-110解放
- 実績「パズルマスター」獲得

## 🎁 隠しステージ（101-110）

### 解放条件
- Stage 1-100全てSランククリア
- プレイ時間20時間以上
- 全実績の80%以上獲得

### 難易度
通常ステージの1.5倍の難易度
制限手数が非常に厳しい

### 報酬
- 特別称号
- ギャラリーモード解放
- 開発者メッセージ

## 💡 Sランク獲得のコツ

### 1. 最短ルートの見つけ方
- ゴールから逆算して考える
- 無駄な移動を削る
- コイン回収の順番を最適化

### 2. よく使うテクニック
- **壁キック**: 壁に当たって方向転換
- **氷床滑り**: 氷床で移動距離を稼ぐ
- **ワープショート**: ワープで大幅短縮

### 3. 詰まったときの対処法
- ヒント機能を使う（各ステージ1回まで）
- 公式フォーラムで質問
- 動画攻略を参考に（YouTubeで検索）

## 📊 効率的な進め方

### 初回プレイ
- まずは全ステージをBランク以上でクリア
- 難しいステージはスキップ可能（後で戻れる）

### 2周目（Sランク獲得）
- ステージ1から順番にSランク狙い
- 1日10ステージずつ進める
- 10日で全ステージSランク達成可能

### やり込みプレイ
- タイムアタックモードに挑戦
- 隠しステージ攻略
- 全実績コンプリート

## 🏅 実績一覧

### ストーリー系
- ✅ 「冒険の始まり」: ステージ1クリア
- ✅ 「中級者」: ステージ50クリア
- ✅ 「上級者」: ステージ100クリア

### チャレンジ系
- 🏆 「パーフェクト」: 全ステージSランク
- 🏆 「スピードランナー」: 全ステージ合計5時間以内
- 🏆 「ヒント不使用」: ヒントなしで全クリア

### 隠し実績
- 🔒 「真のパズラー」: 隠しステージ全クリア
- 🔒 「究極の頭脳」: ノーヒント・ノーミスで全クリア

## 🔗 お役立ちリンク

- 公式サイト：https://example.com/puzzle-adventure
- 攻略フォーラム：https://example.com/pa-forum
- 動画攻略：YouTube「パズルアドベンチャー攻略」

## 📅 今後のアップデート予定

- 新ステージ追加（111-120）
- タイムアタックランキング機能
- レベルエディター実装

---

*この攻略は初心者向けにまとめています。上級者向けの詳細攻略は別記事で公開予定です。*`,
    rating: 4,
    imageUrl: 'https://via.placeholder.com/800x400?text=Puzzle+Adventure',
    affiliateLink: 'https://example.com/affiliate/puzzle-adventure',
    tags: ['パズル', '攻略', '初心者向け', '同人ゲーム', 'ステージクリア', 'Sランク'],
    status: 'published',
    views: 0
  },
  {
    title: '【レビュー】ミステリーマンション - 謎解きとホラーが融合した傑作',
    gameTitle: 'ミステリーマンション',
    genre: 'アドベンチャー',
    releaseDate: new Date('2025-01-01'),
    developer: 'ミステリーワークス',
    platform: 'PC',
    description: '心理的ホラーと本格謎解きを両立した同人アドベンチャー「ミステリーマンション」。緻密なストーリーと美麗なグラフィックが魅力の本作を徹底レビュー。',
    content: `## 🏚️ ゲーム概要

「ミステリーマンション」は、廃墟となった洋館を舞台にしたホラーアドベンチャーゲームです。
プレイヤーは主人公となり、館に隠された謎を解き明かしながら、真実に迫っていきます。

**ジャンル**: ホラーアドベンチャー / 謎解き  
**プレイ時間**: 約8-12時間  
**価格**: 1,500円（税込）  
**対応OS**: Windows 10/11  

## ⭐ 総合評価: 5.0 / 5.0

### 評価内訳
- **ストーリー**: ★★★★★ (5.0)
- **グラフィック**: ★★★★★ (5.0)
- **サウンド**: ★★★★☆ (4.5)
- **ゲームプレイ**: ★★★★★ (5.0)
- **ボリューム**: ★★★★☆ (4.5)

## 📖 ストーリー

### あらすじ

主人公は、失踪した友人を探すため、噂の「呪われた洋館」を訪れる。
館内で見つかる日記や手紙から、かつてここで起きた悲劇が明らかになっていく。
果たして友人は無事なのか？そして館に隠された秘密とは？

### ストーリーの魅力

**多層的な謎**  
表面的な謎解きだけでなく、登場人物の過去や館の歴史が複雑に絡み合う。
プレイヤーは断片的な情報から真実を推理する必要がある。

**マルチエンディング**  
選択肢によって4つのエンディングに分岐。
- トゥルーエンド: 全ての謎を解明
- グッドエンド: 友人を救出
- ノーマルエンド: 脱出のみ
- バッドエンド: 館に囚われる

**心理描写の秀逸さ**  
登場人物の心理描写が丁寧で、感情移入しやすい。
ホラー要素もジャンプスケアではなく、心理的恐怖が主体。

## 🎮 ゲームプレイ

### 基本システム

**探索フェーズ**  
- 館内を自由に探索
- アイテム収集とオブジェクト調査
- 隠し部屋や秘密の通路を発見

**謎解きフェーズ**  
- 暗号解読
- パズル要素
- アイテムの組み合わせ

**イベントフェーズ**  
- ストーリー進行
- 選択肢による分岐
- キャラクターとの会話

### 謎解きの難易度

**初級**: 基本的な暗号（20%）  
**中級**: 複数ヒントの組み合わせ（50%）  
**上級**: 館全体の情報を統合（30%）  

難易度設定があり、初心者でも安心。
ヒント機能も充実（使用制限なし）。

### 操作性

**キーボード操作**  
- 移動: WASD or 矢印キー
- 調査: E キー
- インベントリ: I キー
- マップ: M キー

**マウス操作**  
- クリックで移動・調査
- ドラッグでアイテム使用
- ホイールでズーム

直感的な操作で、アドベンチャーゲーム初心者でもすぐに慣れる。

## 🎨 グラフィック

### ビジュアルの特徴

**美麗な背景**  
館の各部屋は細部まで描き込まれており、探索するだけでも楽しい。
光と影の表現が秀逸で、雰囲気作りに貢献。

**キャラクターデザイン**  
登場キャラクターは全て2Dイラストだが、表情差分が豊富。
感情表現が豊かで、ストーリーを盛り上げる。

**演出面**  
- カットシーンのクオリティが高い
- エフェクトが控えめで雰囲気を壊さない
- UIデザインも世界観に合っている

### 技術面

**推奨スペック**  
- OS: Windows 10/11
- CPU: Core i5以上
- GPU: GTX 1050以上
- RAM: 8GB以上
- ストレージ: 5GB

軽めのスペックで快適に動作。
グラフィック設定も細かく調整可能。

## 🎵 サウンド

### BGM

**環境音楽**  
館内の各エリアに合わせたBGMが流れる。
ホラー要素を強調しすぎず、探索の邪魔にならない。

**効果音**  
- 足音の変化（床の材質で音が変わる）
- 扉の軋む音
- 時計の音
- 遠くで聞こえる不気味な音

細部までこだわった音響設計。

### ボイス

フルボイスではないが、重要シーンでは声優によるボイスあり。
キャラクターの個性が際立つ演技。

## 🎯 攻略のコツ

### 初回プレイ時

1. **メモを取る**  
   重要な情報は必ずメモ。ゲーム内メモ機能を活用。

2. **隅々まで調査**  
   一見関係なさそうな場所にもヒントが隠れている。

3. **日記を熟読**  
   ストーリー理解に必須。読み飛ばさない。

4. **セーブは複数箇所に**  
   分岐前は必ずセーブ。後で別エンディング回収が楽。

### トゥルーエンド到達条件

- 全ての日記・手紙を発見（25個）
- 隠し部屋を全て発見（7箇所）
- 特定の選択肢を選ぶ（攻略情報参照）
- 最終章までに全ての謎を解く

## 👍 良かった点

### ストーリーの完成度
緻密に練られたプロット。伏線の回収が見事で、トゥルーエンドでは全てが繋がる。

### 謎解きの質
難しすぎず簡単すぎない絶妙なバランス。論理的に解ける謎ばかり。

### 雰囲気作り
グラフィック・サウンド・ストーリーが三位一体となって世界観を構築。

### やり込み要素
マルチエンディング、収集要素、隠し要素など、クリア後も楽しめる。

### 価格
1,500円でこのクオリティは破格。コストパフォーマンス抜群。

## 👎 気になった点

### プレイ時間
人によっては8時間でクリアできてしまい、やや短く感じるかも。

### ホラー要素
ジャンプスケアが少ないため、「怖さ」を求める人には物足りない可能性。

### セーブポイント
オートセーブがないため、手動セーブを忘れると進行が戻る。

### 一部の謎の難易度
終盤の謎が急に難しくなる印象。ヒント機能は必須。

## 🎭 こんな人におすすめ

### 強く推奨
- ✅ 本格的な謎解きが好き
- ✅ ストーリー重視のゲームが好き
- ✅ 心理的ホラーが好き（過度なグロは苦手）
- ✅ 探索型アドベンチャーが好き

### 推奨
- ✅ マルチエンディングのゲームが好き
- ✅ 雰囲気のあるゲームを求めている
- ✅ 同人ゲームの良作を探している

### 注意が必要
- ⚠️ アクション要素を求めている
- ⚠️ 超絶ホラーを期待している
- ⚠️ 長時間プレイしたい（20時間以上）
- ⚠️ マルチプレイを求めている

## 🏆 実績・やり込み要素

### 実績一覧（全30個）

**ストーリー系（10個）**
- 「館への招待」: ゲーム開始
- 「最初の謎」: 第1章クリア
- 「真実への扉」: トゥルーエンド到達

**収集系（10個）**
- 「日記収集家」: 全ての日記発見
- 「探検家」: 全ての隠し部屋発見
- 「完璧主義者」: 全てのアイテム発見

**チャレンジ系（10個）**
- 「謎解きマスター」: ヒント未使用でクリア
- 「スピードランナー」: 5時間以内でクリア
- 「コンプリート」: 全エンディング到達

### やり込み時間
- 1周目（ノーマルエンド）: 8時間
- 全エンディング回収: 15時間
- 100%コンプリート: 20時間

## 🆚 類似作品との比較

### vs「ホラーハウス」
- ストーリー: ミステリーマンションの方が複雑
- 難易度: ホラーハウスの方が簡単
- ホラー度: ホラーハウスの方が怖い

### vs「屋敷の謎」
- グラフィック: ミステリーマンションの方が美麗
- ボリューム: 屋敷の謎の方が長い（30時間）
- 謎解き: どちらも高品質（好みによる）

## 💰 購入情報

**通常価格**: 1,500円  
**セール**: 定期的に20-30%オフ  
**購入先**: 
- DLsite
- Steam
- BOOTH
- 公式サイト

**DLC情報**:
現在DLCなし。今後追加ストーリーが配信予定。

## 🔗 関連リンク

- 公式サイト：https://example.com/mystery-mansion
- 公式Twitter：@MysteryMansion_Game
- 攻略Wiki：https://example.com/mm-wiki
- 開発者ブログ：https://example.com/dev-blog

## 📝 最終評価

「ミステリーマンション」は、同人ゲームの枠を超えたクオリティを持つ作品です。

**特に評価したい点**:
1. 緻密に作り込まれたストーリー
2. 論理的に解ける謎解き
3. 美しいグラフィックと雰囲気
4. 価格以上の満足度

**改善を期待する点**:
1. もう少し長いプレイ時間
2. オートセーブ機能
3. 難易度の平準化

総合的に見て、**1,500円でこの体験ができるのは破格**です。
謎解き好き、ストーリー重視の方には強く推薦します。

**最終スコア: 5.0 / 5.0** 🌟🌟🌟🌟🌟

---

*プレイ時間: 約15時間（全エンディング到達）*  
*プレイ環境: Windows 11 / RTX 3060 / 16GB RAM*  
*レビュー日: 2025年12月31日*`,
    rating: 5,
    imageUrl: 'https://via.placeholder.com/800x400?text=Mystery+Mansion',
    affiliateLink: 'https://example.com/affiliate/mystery-mansion',
    tags: ['アドベンチャー', 'ホラー', '謎解き', 'レビュー', '同人ゲーム', 'ストーリー重視'],
    status: 'published',
    views: 0
  }
];

// データベース接続と記事生成
async function generateArticles() {
  try {
    console.log('MongoDB接続中...');
    await mongoose.connect(process.env.MONGODB_URI);
    console.log('MongoDB接続成功');

    // 認証済みユーザーを取得（記事の作成者として使用）
    const user = await User.findOne({ email: 'hiderance1919@gmail.com' });
    
    if (!user) {
      console.error('エラー: 認証済みユーザーが見つかりません');
      console.log('先にGoogleログインを行ってください');
      process.exit(1);
    }

    console.log(`ユーザー見つかりました: ${user.displayName}`);

    // 既存の記事を削除（テスト用）
    const deleteCount = await Article.deleteMany({});
    console.log(`既存の記事を削除: ${deleteCount.deletedCount}件`);

    // サンプル記事を生成
    console.log('\nサンプル記事を生成中...');
    
    for (const articleData of sampleArticles) {
      const article = new Article({
        ...articleData,
        author: user._id
      });
      
      await article.save();
      console.log(`✓ 記事作成: ${article.title}`);
    }

    console.log(`\n完了! ${sampleArticles.length}件のサンプル記事を作成しました`);
    console.log('\nhttp://localhost:3000 でサイトを確認できます');
    console.log('ダッシュボード（http://localhost:3000/dashboard）から記事を編集できます');

  } catch (error) {
    console.error('エラーが発生しました:', error);
  } finally {
    await mongoose.connection.close();
    console.log('\nデータベース接続を終了しました');
  }
}

// スクリプト実行
generateArticles();
