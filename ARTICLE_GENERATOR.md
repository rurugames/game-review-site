# 記事自動生成機能

## 概要

このスクリプトは、同人PCゲームの攻略記事をサンプルデータとして自動生成します。
手動で記事を作成する機能は残しつつ、テスト用やサンプル表示用の記事を簡単に作成できます。

## 使い方

### 1. サンプル記事の自動生成

```powershell
node scripts/generateSampleArticles.js
```

このコマンドで以下の3つのサンプル記事が自動生成されます:

1. **ダンジョンクエスト - 完全攻略**
   - RPGの全ボス攻略
   - レアアイテム入手法
   - 隠しダンジョン情報
   - 効率的な金策方法

2. **パズルアドベンチャー - 全ステージ攻略**
   - 初心者向けパズル攻略
   - Sランク獲得のコツ
   - 隠しステージ情報

3. **ミステリーマンション - レビュー**
   - ホラーアドベンチャーの詳細レビュー
   - マルチエンディング情報
   - 攻略のコツとおすすめポイント

### 2. 手動で記事を作成

従来通り、ダッシュボードから手動で記事を作成・編集できます:

1. http://localhost:3000/dashboard にアクセス
2. 「新規記事作成」ボタンをクリック
3. フォームに記入して投稿

## 生成される記事の特徴

### 充実したコンテンツ
- **詳細な攻略情報**: ボス戦の戦術、ステージ攻略チャート
- **レアアイテム情報**: 入手方法、性能詳細
- **やり込み要素**: 隠し要素、トロフィー情報
- **FAQ**: よくある質問と回答

### SEO対策済み
- **見出し構造**: H2, H3を適切に使用
- **キーワード**: 検索されやすいキーワードを含む
- **タグ付け**: 関連タグで検索性向上

### アフィリエイト対応
- **購入リンク**: アフィリエイトリンク欄を用意
- **価格情報**: ゲームの価格を明記
- **関連リンク**: 公式サイト、攻略Wikiへのリンク

## カスタマイズ方法

`scripts/generateSampleArticles.js` ファイルを編集することで、
独自のサンプル記事を追加できます:

```javascript
const sampleArticles = [
  {
    title: '記事タイトル',
    gameTitle: 'ゲーム名',
    genre: 'ジャンル',
    releaseDate: new Date('2025-01-01'),
    developer: '開発者名',
    platform: 'PC',
    description: '記事の説明文',
    content: `記事本文（Markdown形式）`,
    rating: 5,
    imageUrl: '画像URL',
    affiliateLink: 'アフィリエイトリンク',
    tags: ['タグ1', 'タグ2'],
    status: 'published',
    views: 0
  }
  // 追加の記事...
];
```

## 注意事項

### ユーザー認証が必要
スクリプトを実行する前に、Googleログインで認証を済ませておく必要があります。
認証されたユーザー（hiderance1919@gmail.com）が記事の作成者として設定されます。

### 既存記事の削除
デフォルトでは、既存のサンプル記事を削除してから新しい記事を生成します。
本番環境で実行する場合は、この動作に注意してください。

削除動作を無効にする場合は、以下の行をコメントアウト:

```javascript
// const deleteCount = await Article.deleteMany({});
```

## 本番環境での使用

### Render.comで実行

1. Render.comのダッシュボードにアクセス
2. Shellを開く
3. 以下のコマンドを実行:

```bash
node scripts/generateSampleArticles.js
```

### 環境変数の確認

以下の環境変数が正しく設定されていることを確認:
- `MONGODB_URI`: MongoDB接続文字列
- `GOOGLE_CLIENT_ID`: Google OAuth ID
- `GOOGLE_CLIENT_SECRET`: Google OAuth Secret

## トラブルシューティング

### エラー: 認証済みユーザーが見つかりません

**原因**: データベースにユーザー情報が登録されていない

**解決方法**:
1. http://localhost:3000 にアクセス
2. Googleログインを実行
3. 再度スクリプトを実行

### MongoDB接続エラー

**原因**: データベース接続文字列が間違っている

**解決方法**:
1. `.env` ファイルの `MONGODB_URI` を確認
2. MongoDB Atlasのネットワークアクセス設定を確認
3. IPアドレスが許可されているか確認（0.0.0.0/0推奨）

## 今後の拡張予定

- [ ] AIを使った記事自動生成
- [ ] RSS フィードから記事を取り込む機能
- [ ] スケジュール投稿機能
- [ ] 記事テンプレート機能
- [ ] 一括インポート機能（CSV, JSON）

## 関連ファイル

- `scripts/generateSampleArticles.js`: 記事生成スクリプト本体
- `models/Article.js`: 記事データモデル
- `routes/articles.js`: 記事CRUD API

---

*最終更新: 2025年12月31日*
